<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>InsightForge</title>
    <link rel="stylesheet" href="./styles/main.css" />
    <script src="https://cdn.jsdelivr.net/npm/d3@7"></script>
  </head>

  <body>
    <header class="topbar">
      <h1>InsightForge</h1>
      <div class="status" id="status">Ready</div>
    </header>

    <main class="layout">
      <aside class="sidebar">
        <section class="card">
          <h2>Dataset</h2>

          <label class="button">
            Upload CSV
            <input id="fileInput" type="file" accept=".csv,text/csv" hidden />
          </label>

          <div class="meta" id="datasetMeta">
            <p><strong>No dataset loaded</strong></p>
            <p>Upload a CSV to begin.</p>
          </div>
        </section>

        <section class="card">
          <h2>Scatter controls</h2>

          <div class="row compact">
            <label for="xSelect">X:</label>
            <select id="xSelect" disabled></select>
          </div>

          <div class="row compact">
            <label for="ySelect">Y:</label>
            <select id="ySelect" disabled></select>
          </div>

          <div class="row row-inline">
            <input type="checkbox" id="normaliseToggle" />
            <label for="normaliseToggle">Normalise numeric columns (0-1)</label>
          </div>

          <button class="secondary" id="renderBtn" disabled>
            Render scatter
          </button>

          <p class="hint">
            Select columns for the X and Y axes, then click "Render scatter" to
            generate the plot.
          </p>
        </section>
        <section class="card">
          <h2>Clustering (K-Means)</h2>
          <div class="row">
            <label for="kInput">Number of clusters (k):</label>
            <input type="number" id="kInput" value="3" min="2" max="10" />
          </div>
          <label for="featureSelect" class="label"
            >Features (2-8 recommended)</label
          >
          <select id="featureSelect" multiple size="8" disabled></select>
          <button class="secondary" id="runKMeansBtn" disabled>
            Perform K-Means Clustering
          </button>
          <p class="hint" id="kmeansStatus">
            Select features to use for clustering, set the number of clusters,
            then click "Perform K-Means Clustering".
        </section>
      </aside>

      <section class="workspace">
        <div class="card">
          <h2>Preview</h2>
          <div class="tableWrap">
            <table id="previewTable">
              <thead></thead>
              <tbody></tbody>
            </table>
          </div>
        </div>

        <div class="card">
          <h2>Scatterplot</h2>
          <div id="chart" class="chart"></div>
        </div>
      </section>
    </main>

    <script type="module" src="./js/main.js"></script>
  </body>
</html>
